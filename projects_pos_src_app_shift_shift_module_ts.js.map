{"version":3,"file":"projects_pos_src_app_shift_shift_module_ts.js","mappings":"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","sources":["./projects/pos/src/app/shift/shift.component.ts","./projects/pos/src/app/shift/shift.component.html","./projects/pos/src/app/shift/shift.module.ts"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { OutletSetting } from '../models/outlet-setting.model';\r\nimport { Shift } from '../models/shift.model.model';\r\nimport { User } from '../models/user.model';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { OutletService } from '../services/outlet.service';\r\nimport { PointerService } from '../services/pointer.service';\r\nimport { ShiftService } from '../services/shift.service';\r\nimport { TableLayoutService } from '../services/table-layout.service';\r\nimport { environment } from '../../environments/environment';\r\nimport { threadId } from 'worker_threads';\r\ndeclare function enableNumericKeyboard(): any;\r\n\r\n\r\n@Component({\r\n  selector: 'app-shift',\r\n  templateUrl: './shift.component.html'\r\n})\r\nexport class ShiftComponent implements OnInit {\r\n  showShiftButton = true;\r\n  shift: string = \"\";\r\n  openingBalance: string = \"\";\r\n  error: any[] = [];\r\n  outletId: string = \"\";\r\n  hasMultipleShift: boolean = false;\r\n  businessDate: string;\r\n  loadedUser: User = JSON.parse(localStorage.getItem(\"userData\"));\r\n  isQsrOutlet: boolean = false;\r\n  shiftOptions = [1, 2];\r\n  allShifts: any[] = []\r\n\r\n  constructor(private shiftService: ShiftService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private outletService: OutletService,\r\n    private tableLayoutService: TableLayoutService,\r\n    private authService: AuthService,\r\n    private router: Router) { }\r\n  @ViewChild('authForm') form: NgForm;\r\n\r\n  ngOnInit(): void {\r\n    enableNumericKeyboard();\r\n\r\n    this.businessDate = PointerService.getISOBusinessDate();\r\n    this.outletId = this.activatedRoute.snapshot.params['outlet_id'];\r\n\r\n    this.outletService.getOutletSettings(this.outletId).subscribe(data => {\r\n      if (data && data.length > 0) {\r\n        let currentOutletSetting: OutletSetting[] = data.filter(a => a.pos_restaurant_id === +this.outletId);\r\n\r\n        if (currentOutletSetting.length > 0) {\r\n          this.hasMultipleShift = currentOutletSetting[0].has_multiple_shifts_ind;\r\n\r\n          if (!this.loadedUser) {\r\n            this.router.navigate(['/']);\r\n          }\r\n\r\n          this.shiftService.getAll(this.outletId, this.loadedUser.id.toString(), this.businessDate).subscribe(\r\n            resData => {\r\n              if (resData && resData.length > 0) {\r\n                this.checkQsrOutlet();\r\n              }\r\n              else {\r\n                // if (!this.hasMultipleShift) {\r\n                //   this.shift = \"1\";\r\n                //   this.showShiftButton = false;\r\n                // } else {\r\n                //   this.showShiftButton = true;\r\n                // }\r\n\r\n                this.shiftService.getAllShifts(this.outletId, this.businessDate).subscribe(\r\n                  resData => {\r\n                    this.allShifts = resData;\r\n                    if (resData && resData.length > 0) {\r\n                      this.shiftOptions = [];\r\n                      this.shiftOptions.push(this.getCurrentShiftNo(this.allShifts))\r\n                      this.showShiftButton = true;\r\n                    }\r\n                  },\r\n                  errorMessage => {\r\n                    this.error.push(errorMessage);\r\n                  }\r\n                )\r\n              }\r\n            },\r\n            errorMessage => {\r\n              this.error.push(errorMessage);\r\n            }\r\n          )\r\n\r\n        }\r\n        else {\r\n          this.router.navigate(['/outlet']);\r\n        }\r\n      }\r\n      else {\r\n        this.router.navigate(['/outlet']);\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  getCurrentShiftNo(shifts) {\r\n    const now = new Date();\r\n    const currentTime = now.getHours() * 60 + now.getMinutes(); // minutes since midnight\r\n\r\n    for (const shift of shifts) {\r\n      const fromTime = new Date(shift.from_time);\r\n      const toTime = new Date(shift.to_time);\r\n\r\n      const fromMinutes = fromTime.getHours() * 60 + fromTime.getMinutes();\r\n      const toMinutes = toTime.getHours() * 60 + toTime.getMinutes();\r\n\r\n      if (currentTime >= fromMinutes && currentTime < toMinutes) {\r\n        return shift.shift_no;\r\n      }\r\n    }\r\n\r\n    return null; // If no shift matches\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    let element: HTMLElement = document.getElementById(\"shiftInput\") as HTMLElement;\r\n    element.click();\r\n  }\r\n\r\n  onShiftInputClick(): void {\r\n    if ((<HTMLInputElement>document.getElementById(\"shiftInput\")).value != \"\") {\r\n      this.showShiftButton = false;\r\n      this.shift = (<HTMLInputElement>document.getElementById(\"shiftInput\")).value;\r\n\r\n      (<HTMLInputElement>document.getElementById(\"shiftInput\")).setAttribute(\"disabled\", \"disabled\");\r\n      (<HTMLInputElement>document.getElementById(\"openingBalanceInput\")).removeAttribute(\"disabled\");\r\n      (<HTMLInputElement>document.getElementById(\"openingBalanceInput\")).value = \"\";\r\n      (<HTMLInputElement>document.getElementById(\"shiftInput\")).value = \"\";\r\n    }\r\n    else {\r\n      (<HTMLInputElement>document.getElementById(\"shiftInput\")).style.borderColor = \"red\";\r\n    }\r\n  }\r\n\r\n  onOpeningBalanceInputClick(): void {\r\n    if ((<HTMLInputElement>document.getElementById(\"openingBalanceInput\")).value != \"\") {\r\n      this.showShiftButton = false;\r\n      this.openingBalance = (<HTMLInputElement>document.getElementById(\"openingBalanceInput\")).value;\r\n      this.form.ngSubmit.emit();\r\n    } else {\r\n      (<HTMLInputElement>document.getElementById(\"openingBalanceInput\")).style.borderColor = \"red\";\r\n    }\r\n  }\r\n\r\n  onShitEnter(): void {\r\n    this.onShiftInputClick();\r\n  }\r\n\r\n  onOpeningBalanceEnter(): void {\r\n    this.onOpeningBalanceInputClick();\r\n  }\r\n\r\n  onSubmit(form: NgForm): void {\r\n    this.error = [];\r\n    if (!form.valid) {\r\n      return;\r\n    }\r\n    else {\r\n      this.shiftService.isValidShift(this.outletId, this.loadedUser.id.toString(), this.businessDate, this.shift).subscribe(\r\n        resData => {\r\n          if (resData && resData.length > 0) {\r\n            this.showShiftButton = true;\r\n            this.error.push(\"Shift \" + this.shift + \" is closed please enter another shift no\");\r\n          } else {\r\n            this.createUserShift();\r\n          }\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  createUserShift(): void {\r\n    let user = this.authService.userValue;\r\n    if (user) {\r\n      const shift: Shift = new Shift(\r\n        null,\r\n        +this.outletId,\r\n        +this.shift,\r\n        PointerService.getBusinessDate(),\r\n        PointerService.getLocalCurrencyId(),\r\n        +this.openingBalance,\r\n        0, 0, 0,\r\n        false,\r\n        +user.id,\r\n        false,\r\n        null,\r\n        \"localhost\",\r\n        user.saas_company_id,\r\n        user.company_id,\r\n        user.branch_id\r\n      )\r\n      this.shiftService.create(shift).subscribe((data) => {\r\n        this.checkQsrOutlet();\r\n        // this.tableLayoutService.getTableLayoutBy(this.outletId).subscribe(() => {\r\n        //   this.router.navigate(['/table-layout/' + this.outletId]);\r\n        // })\r\n      })\r\n    } else {\r\n      this.router.navigate(['/']);\r\n    }\r\n  }\r\n\r\n  checkQsrOutlet() {\r\n    if (this.outletId) {\r\n      const outletSettingData: OutletSetting[] = JSON.parse(localStorage.getItem(\"outletSetting\"));\r\n      if (outletSettingData) {\r\n        let currentOutletSetting = outletSettingData.filter(a => a.pos_restaurant_id === +this.outletId);\r\n\r\n        if (currentOutletSetting.length > 0) {\r\n          this.isQsrOutlet = currentOutletSetting[0].qsr_in_use_ind;\r\n\r\n          //Get any Free table from layout\r\n          this.tableLayoutService.getTableLayoutBy(this.outletId).subscribe((layoutData) => {\r\n            if (this.isQsrOutlet) {\r\n              let selectedTable = layoutData.filter(t => {\r\n                return t.pos_restaurant_id == +this.outletId && t.table_status.toUpperCase() === environment.POS_TABLE_STATUS_AVAILABLE.toUpperCase()\r\n              });\r\n\r\n              if (selectedTable && selectedTable.length > 0) {\r\n                this.router.navigate(['/billing/' + this.outletId + '/qsr/' + selectedTable[0].table_code]);\r\n              } else {\r\n                this.router.navigate(['/billing/' + this.outletId + '/qsr/' + selectedTable[0].table_code]);\r\n              }\r\n            } else {\r\n              this.router.navigate(['/table-layout/' + this.outletId]);\r\n            }\r\n          })\r\n        }\r\n      } else {\r\n        this.router.navigate(['/outlet']);\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"wrapg_blk\">\r\n  <app-header></app-header>\r\n\r\n  <main class=\"main_cnt_blk\">\r\n    <section class=\"login_blk_parnt\">\r\n      <div class=\"login_inr_contnr\">\r\n        <!-- SOF Error Message html -->\r\n        <div class=\"error_msg_parnt\" *ngIf=\"error && error.length > 0\">\r\n          <h5>Please correct the following errors and try again.</h5>\r\n          <ul>\r\n            <li *ngFor=\"let message of error\">\r\n              {{ message }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <!-- EOF Error Message html -->\r\n        <div class=\"login_cnt_blk\">\r\n          <div class=\"login_outlet_icn select_out_blk blue_main_parnt\">\r\n            <a class=\"form-control select_out_icn\">\r\n              <span>{{ 'SHIFT.OPEN_SHIFT' | translate }}</span>\r\n            </a>\r\n          </div>\r\n          <div class=\"keypad_main_blk\">\r\n            <select id=\"shiftInput\" [style]=\"showShiftButton ? 'display: inline-block;' : 'display: none;'\"\r\n              (keyup.enter)=\"onShitEnter()\">\r\n              <option *ngFor=\"let option of shiftOptions\" [value]=\"option\">{{ option }}</option>\r\n            </select>\r\n\r\n            <input id=\"openingBalanceInput\" type=\"text\" class=\"numericInput\"\r\n              [style]=\"!showShiftButton ? 'display: inline-block;' : 'display: none;'\"\r\n              (keyup.enter)=\"onOpeningBalanceEnter()\">\r\n\r\n            <div id=\"digitalKeyboardContainer\" class=\"digitalKeyboardContainer\"></div>\r\n\r\n            <div class=\"button_blk\">\r\n              <button type=\"button\" class=\"btn\" (click)=\"onShiftInputClick()\"\r\n                [style]=\"showShiftButton ? 'display: inline-block;' : 'display: none;'\">\r\n                <i class=\"opng_lgn_btn\"></i>{{ 'SHIFT.SHIFT_NUMBER' | translate }}\r\n              </button>\r\n\r\n              <button type=\"button\" (click)=\"onOpeningBalanceInputClick()\"\r\n                [style]=\"!showShiftButton ? 'display: inline-block;' : 'display: none;'\">\r\n                <i class=\"opng_lgn_btn\"></i>{{ 'SHIFT.OPENING_BALANCE' | translate }}\r\n              </button>\r\n            </div>\r\n\r\n            <form #authForm=\"ngForm\" (ngSubmit)=\"onSubmit(authForm)\">\r\n              <input type=\"hidden\" name=\"shift\" [ngModel]=\"shift\" required />\r\n              <input type=\"hidden\" name=\"openingBalance\" [ngModel]=\"openingBalance\" required />\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </main>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ShiftComponent } from './shift.component';\r\nimport { RouterModule } from '@angular/router';\r\nimport { AuthGuard } from '../auth/auth.guard';\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { CloseShiftComponent } from './close-shift/close-shift.component';\r\n\r\n@NgModule({\r\n  declarations: [ShiftComponent, CloseShiftComponent],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    SharedModule,\r\n    RouterModule.forChild([\r\n      { path: '', component: ShiftComponent, canActivate: [AuthGuard]},\r\n    ])\r\n  ]\r\n})\r\nexport class ShiftModule { }\r\n"],"names":["Shift","PointerService","environment","i0","ShiftComponent","constructor","shiftService","activatedRoute","outletService","tableLayoutService","authService","router","JSON","parse","localStorage","getItem","ngOnInit","enableNumericKeyboard","businessDate","getISOBusinessDate","outletId","snapshot","params","getOutletSettings","subscribe","data","length","currentOutletSetting","filter","a","pos_restaurant_id","hasMultipleShift","has_multiple_shifts_ind","loadedUser","navigate","getAll","id","toString","resData","checkQsrOutlet","getAllShifts","allShifts","shiftOptions","push","getCurrentShiftNo","showShiftButton","errorMessage","error","shifts","now","Date","currentTime","getHours","getMinutes","shift","fromTime","from_time","toTime","to_time","fromMinutes","toMinutes","shift_no","ngAfterViewInit","element","document","getElementById","click","onShiftInputClick","value","setAttribute","removeAttribute","style","borderColor","onOpeningBalanceInputClick","openingBalance","form","ngSubmit","emit","onShitEnter","onOpeningBalanceEnter","onSubmit","valid","isValidShift","createUserShift","user","userValue","getBusinessDate","getLocalCurrencyId","saas_company_id","company_id","branch_id","create","outletSettingData","isQsrOutlet","qsr_in_use_ind","getTableLayoutBy","layoutData","selectedTable","t","table_status","toUpperCase","POS_TABLE_STATUS_AVAILABLE","table_code","selectors","viewQuery","ctx","CommonModule","RouterModule","AuthGuard","SharedModule","FormsModule","CloseShiftComponent","ShiftModule","forChild","path","component","canActivate","declarations","imports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}